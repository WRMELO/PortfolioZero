# =============================================================================
# PortfolioZero — Configuração de Fontes de Dados para UNIVERSE_CANDIDATES
# Versão: 1.1
# Data: 02/12/2024
# =============================================================================
#
# Este arquivo define as fontes de dados necessárias para construir a tabela
# UNIVERSE_CANDIDATES (pré-lista de 60-80 ativos).
#
# Referência: docs/universe/UNIVERSE_DATA_PIPELINE_V1.md
# =============================================================================

description: >
  Configuração de fontes de dados para construção do UNIVERSE_CANDIDATES (V1).
  Provider primário: Yahoo Finance via yfinance.

# -----------------------------------------------------------------------------
# PROVIDER PRINCIPAL: Yahoo Finance
# -----------------------------------------------------------------------------
provider: yahoo_finance

# -----------------------------------------------------------------------------
# UNIVERSO DE TICKERS: Ativos a serem monitorados
# -----------------------------------------------------------------------------
# Formato: ticker.SA para ativos da B3
# Lista inicial com ~80 ativos para gerar pré-lista de 60-80 candidatos
universe:
  # Blue Chips - Financeiro
  - ITUB4.SA
  - BBDC4.SA
  - BBAS3.SA
  - SANB11.SA
  - ITSA4.SA
  - B3SA3.SA
  - BBSE3.SA
  
  # Blue Chips - Commodities
  - VALE3.SA
  - PETR4.SA
  - PETR3.SA
  - CSNA3.SA
  - GGBR4.SA
  - USIM5.SA
  - BRAP4.SA
  - SUZB3.SA
  - KLBN11.SA
  
  # Energia
  - ELET3.SA
  - ELET6.SA
  - ENBR3.SA
  - ENGI11.SA
  - CPFE3.SA
  - TAEE11.SA
  - CPLE6.SA
  - CMIG4.SA
  - AURE3.SA
  
  # Consumo
  - ABEV3.SA
  - MGLU3.SA
  - LREN3.SA
  - NTCO3.SA
  - PCAR3.SA
  - ASAI3.SA
  - CRFB3.SA
  - AMER3.SA
  - SOMA3.SA
  - ARZZ3.SA
  - PETZ3.SA
  
  # Saúde
  - RDOR3.SA
  - HAPV3.SA
  - FLRY3.SA
  - RADL3.SA
  - QUAL3.SA
  - HYPE3.SA
  
  # Indústria / Construção
  - WEGE3.SA
  - EMBR3.SA
  - RENT3.SA
  - EQTL3.SA
  - MRVE3.SA
  - CYRE3.SA
  - TEND3.SA
  - EVEN3.SA
  - SBSP3.SA
  
  # Telecomunicações / Tech
  - VIVT3.SA
  - TIMS3.SA
  - TOTS3.SA
  - LWSA3.SA
  - CASH3.SA
  - POSI3.SA
  
  # Outros / Utilidades
  - JBSS3.SA
  - BRFS3.SA
  - BEEF3.SA
  - CCRO3.SA
  - ECOR3.SA
  - RAIL3.SA
  - UGPA3.SA
  - CSAN3.SA
  - RAIZ4.SA
  - VBBR3.SA
  - PRIO3.SA
  - RRRP3.SA
  
  # BDRs (Tech Internacional)
  - AAPL34.SA
  - MSFT34.SA
  - GOOGL34.SA
  - AMZO34.SA
  - NVDC34.SA
  - TSLA34.SA
  - META34.SA

# Símbolos de índices para referência
index_symbols:
  - ^BVSP  # Ibovespa

# -----------------------------------------------------------------------------
# PERÍODO DE DADOS
# -----------------------------------------------------------------------------
date_range:
  start: "2022-01-01"
  end: "today"  # Será resolvido para a data atual

# -----------------------------------------------------------------------------
# FREQUÊNCIA E CAMPOS
# -----------------------------------------------------------------------------
frequency: "1d"

fields:
  - open
  - high
  - low
  - close
  - adj_close
  - volume

# -----------------------------------------------------------------------------
# OUTPUT: Configuração de persistência
# -----------------------------------------------------------------------------
output:
  path: data/raw/market/
  partitioning: per_ticker  # Opções: per_ticker, per_ticker_year, single_file
  format: parquet

# -----------------------------------------------------------------------------
# CLASSIFICAÇÃO SETORIAL (manual para v1)
# -----------------------------------------------------------------------------
sector_mapping:
  # Financeiro
  ITUB4.SA: Financeiro
  BBDC4.SA: Financeiro
  BBAS3.SA: Financeiro
  SANB11.SA: Financeiro
  ITSA4.SA: Financeiro
  B3SA3.SA: Financeiro
  BBSE3.SA: Financeiro
  
  # Commodities
  VALE3.SA: Commodities
  PETR4.SA: Commodities
  PETR3.SA: Commodities
  CSNA3.SA: Commodities
  GGBR4.SA: Commodities
  USIM5.SA: Commodities
  BRAP4.SA: Commodities
  SUZB3.SA: Commodities
  KLBN11.SA: Commodities
  
  # Energia
  ELET3.SA: Energia
  ELET6.SA: Energia
  ENBR3.SA: Energia
  ENGI11.SA: Energia
  CPFE3.SA: Energia
  TAEE11.SA: Energia
  CPLE6.SA: Energia
  CMIG4.SA: Energia
  AURE3.SA: Energia
  
  # Consumo
  ABEV3.SA: Consumo
  MGLU3.SA: Consumo
  LREN3.SA: Consumo
  NTCO3.SA: Consumo
  PCAR3.SA: Consumo
  ASAI3.SA: Consumo
  CRFB3.SA: Consumo
  AMER3.SA: Consumo
  SOMA3.SA: Consumo
  ARZZ3.SA: Consumo
  PETZ3.SA: Consumo
  
  # Saúde
  RDOR3.SA: Saúde
  HAPV3.SA: Saúde
  FLRY3.SA: Saúde
  RADL3.SA: Saúde
  QUAL3.SA: Saúde
  HYPE3.SA: Saúde
  
  # Indústria
  WEGE3.SA: Indústria
  EMBR3.SA: Indústria
  RENT3.SA: Indústria
  EQTL3.SA: Indústria
  MRVE3.SA: Indústria
  CYRE3.SA: Indústria
  TEND3.SA: Indústria
  EVEN3.SA: Indústria
  SBSP3.SA: Utilidades
  
  # Telecomunicações / Tech
  VIVT3.SA: Tecnologia
  TIMS3.SA: Tecnologia
  TOTS3.SA: Tecnologia
  LWSA3.SA: Tecnologia
  CASH3.SA: Tecnologia
  POSI3.SA: Tecnologia
  
  # Outros
  JBSS3.SA: Consumo
  BRFS3.SA: Consumo
  BEEF3.SA: Consumo
  CCRO3.SA: Utilidades
  ECOR3.SA: Utilidades
  RAIL3.SA: Utilidades
  UGPA3.SA: Energia
  CSAN3.SA: Energia
  RAIZ4.SA: Energia
  VBBR3.SA: Energia
  PRIO3.SA: Commodities
  RRRP3.SA: Commodities
  
  # BDRs
  AAPL34.SA: Tecnologia
  MSFT34.SA: Tecnologia
  GOOGL34.SA: Tecnologia
  AMZO34.SA: Tecnologia
  NVDC34.SA: Tecnologia
  TSLA34.SA: Tecnologia
  META34.SA: Tecnologia

# Mapeamento de tipo de instrumento
instrument_type_mapping:
  # Ações ON
  VALE3.SA: ACAO_ON
  PETR3.SA: ACAO_ON
  BBAS3.SA: ACAO_ON
  WEGE3.SA: ACAO_ON
  MGLU3.SA: ACAO_ON
  LREN3.SA: ACAO_ON
  ABEV3.SA: ACAO_ON
  ELET3.SA: ACAO_ON
  CSNA3.SA: ACAO_ON
  EMBR3.SA: ACAO_ON
  RENT3.SA: ACAO_ON
  EQTL3.SA: ACAO_ON
  MRVE3.SA: ACAO_ON
  CYRE3.SA: ACAO_ON
  TEND3.SA: ACAO_ON
  EVEN3.SA: ACAO_ON
  SBSP3.SA: ACAO_ON
  VIVT3.SA: ACAO_ON
  TIMS3.SA: ACAO_ON
  TOTS3.SA: ACAO_ON
  LWSA3.SA: ACAO_ON
  CASH3.SA: ACAO_ON
  POSI3.SA: ACAO_ON
  JBSS3.SA: ACAO_ON
  BRFS3.SA: ACAO_ON
  BEEF3.SA: ACAO_ON
  CCRO3.SA: ACAO_ON
  ECOR3.SA: ACAO_ON
  RAIL3.SA: ACAO_ON
  UGPA3.SA: ACAO_ON
  CSAN3.SA: ACAO_ON
  PRIO3.SA: ACAO_ON
  RRRP3.SA: ACAO_ON
  NTCO3.SA: ACAO_ON
  PCAR3.SA: ACAO_ON
  ASAI3.SA: ACAO_ON
  CRFB3.SA: ACAO_ON
  AMER3.SA: ACAO_ON
  SOMA3.SA: ACAO_ON
  ARZZ3.SA: ACAO_ON
  PETZ3.SA: ACAO_ON
  RDOR3.SA: ACAO_ON
  HAPV3.SA: ACAO_ON
  FLRY3.SA: ACAO_ON
  RADL3.SA: ACAO_ON
  QUAL3.SA: ACAO_ON
  HYPE3.SA: ACAO_ON
  AURE3.SA: ACAO_ON
  CPFE3.SA: ACAO_ON
  
  # Ações PN
  ITUB4.SA: ACAO_PN
  BBDC4.SA: ACAO_PN
  PETR4.SA: ACAO_PN
  ITSA4.SA: ACAO_PN
  GGBR4.SA: ACAO_PN
  USIM5.SA: ACAO_PN
  BRAP4.SA: ACAO_PN
  ELET6.SA: ACAO_PN
  CPLE6.SA: ACAO_PN
  CMIG4.SA: ACAO_PN
  RAIZ4.SA: ACAO_PN
  VBBR3.SA: ACAO_ON
  
  # Units
  SANB11.SA: ACAO_PN
  KLBN11.SA: ACAO_PN
  ENGI11.SA: ACAO_PN
  TAEE11.SA: ACAO_PN
  SUZB3.SA: ACAO_ON
  B3SA3.SA: ACAO_ON
  BBSE3.SA: ACAO_ON
  ENBR3.SA: ACAO_ON
  
  # BDRs
  AAPL34.SA: BDR
  MSFT34.SA: BDR
  GOOGL34.SA: BDR
  AMZO34.SA: BDR
  NVDC34.SA: BDR
  TSLA34.SA: BDR
  META34.SA: BDR

# -----------------------------------------------------------------------------
# VALIDAÇÃO
# -----------------------------------------------------------------------------
validation:
  checks:
    - no_null_tickers
    - no_negative_prices
    - no_negative_volumes
    - min_records_per_ticker: 100
  
  on_failure: warn_and_continue

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
rate_limit:
  requests_per_minute: 30
  delay_between_tickers_seconds: 0.5
